-- check if numbers generated by a called contract are
-- the same if called on the same transaction
function check_if_equal(address)

	local list1 = contract.call(address, 'get_numbers', 10)
	local list2 = contract.call(address, 'get_numbers', 10)
	local list3 = contract.call(address, 'get_numbers', 10)

	if lists_are_equal(list1, list2) then
		return true
	end
	if lists_are_equal(list2, list3) then
		return true
	end

	return false
end

function lists_are_equal(list1, list2)
	-- check if lengths are different
	if #list1 ~= #list2 then
		return false
	end

	-- compare each element
	for i = 1, #list1 do
		if list1[i] ~= list2[i] then
			return false
		end
	end

	return true
end

abi.register(check_if_equal)
